<div class="contact-form-wrapper">
  {% if section.settings.title != blank %}
    <h2>{{ section.settings.title }}</h2>
  {% endif %}

  {% if section.settings.description != blank %}
    <p>{{ section.settings.description }}</p>
  {% endif %}

  {% form 'contact' %}
    {% if form.posted_successfully? %}
      <p class="success">Merci ! Votre message a bien été envoyé.</p>
    {% endif %}

    {% if form.errors %}
      <div class="errors">
        {% for field in form.errors %}
          <p>{{ field | capitalize }}: {{ form.errors[field] }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <label for="ContactFormName">Nom</label>
    <input type="text" name="contact[name]" id="ContactFormName" required>

    <label for="ContactFormEmail">Email</label>
    <input type="email" name="contact[email]" id="ContactFormEmail" required>

    <label for="ContactFormMessage">Message</label>
    <textarea name="contact[body]" id="ContactFormMessage" rows="6" required></textarea>

    <button type="submit">Envoyer</button>
  {% endform %}
</div>

<style>
  .contact-form-wrapper {
    max-width: 500px;
    margin: auto;
  }
  .contact-form-wrapper label {
    display: block;
    margin: 12px 0 4px;
  }
  .contact-form-wrapper input,
  .contact-form-wrapper textarea {
    width: 100%;
    padding: 10px;
  }
  .contact-form-wrapper button {
    margin-top: 16px;
    padding: 12px 16px;
    cursor: pointer;
  }
  .success { color: green; }
  .errors { color: red; }
</style>

{% schema %}
{
  "name": "Section Contact",
  "class": "contact-section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titre",
      "default": "Contactez-nous"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Envoyez-nous un message et nous vous répondrons rapidement."
    }
  ],
  "presets": [
    {
      "name": "Formulaire de contact",
      "category": "Formulaire"
    }
  ]
}
{% endschema %}
